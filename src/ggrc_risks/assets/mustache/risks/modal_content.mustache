{{!
    Copyright (C) 2015 Reciprocity, Inc - All Rights Reserved
    Unauthorized use, copying, distribution, displaying, or public performance
    of this file, via any medium, is strictly prohibited. All information
    contained herein is proprietary and confidential and may not be shared
    with any third party without the express written consent of Reciprocity, Inc.
    Created By: anze@reciprocitylabs.com
    Maintained By: anze@reciprocitylabs.com
}}

{{!div class="modal-body"}}
<div class="hideable-holder">
{{#instance}}
<form action="javascript://">
  {{> /static/mustache/base_objects/form_restore.mustache}}

  <div class="row-fluid">
    <div class="span6 {{#instance.computed_errors.title}}field-failure{{/instance.computed_errors.title}}">
      <label>
        Title
        <span class="required">*</span>
        <i class="grcicon-help-black" rel="tooltip" title="Give new Risks a name that's easy to search for and indicates the main goals of this Risk."></i>
      </label>
      <input tabindex="1" class="input-block-level" placeholder="Enter Title" name="title" type="text" value="{{instance.title}}" autofocus>
      {{#instance.computed_errors.title}}<label class="help-inline warning">{{this}}</label>{{/instance.computed_errors.title}}
    </div>
  </div>

  <div class="row-fluid">
    <div class="span6 {{#instance.computed_errors.description}}field-failure{{/instance.computed_errors.description}}">
      <label>
        Description
        <span class="required">*</span>
        <i class="grcicon-help-black" rel="tooltip" title="Provide more details on the purpose of this Risk and provide context for how and when this Risk might be used."></i>
      </label> {{#instance.computed_errors.description}}<label class="help-inline warning">{{this}}</label>{{/instance.computed_errors.description}}
      <div class="wysiwyg-area">
        <textarea tabindex="2" id="program_description" class="span12 double wysihtml5" name="description" placeholder="Enter Description">{{{instance.description}}}</textarea>
      </div>
    </div>
    <div class="span6 hide-wrap">
      <div class="row-fluid {{#instance.computed_errors.owners}}field-failure{{/instance.computed_errors.owners}}">
        {{#using owner=instance.owners.0 model_singular='Risk'}}
          <label>
            Owner
            <span class="required">*</span>
            <i class="grcicon-help-black" rel="tooltip" title="This is the person in charge of this Risk."></i>
          </label>
          <input tabindex="3" class="input-block-level" name="owners.0.email" data-lookup="Person" placeholder="Enter email address" type="text" value="{{firstnonempty owner.email}}" />
        {{#instance.computed_errors.owners}}<label class="help-inline warning">{{this}}</label>{{/instance.computed_errors.owners}}
        {{/using}}
      </div>

      <div class="row-fluid {{#instance.computed_errors.contact}}field-failure{{/instance.computed_errors.contact}}">
        {{#using contact=instance.contact model_singular='Risk'}}
        <label>
          Contact
          <span class="required">*</span>
          <i class="grcicon-help-black" rel="tooltip" title="Point of contact for this object"></i>
        </label>
        <input tabindex="4" class="input-block-level" name="contact.email" data-lookup="Person" placeholder="Enter email address" type="text" value="{{firstnonempty contact.email}}" />
        {{#instance.computed_errors.contact}}<label class="help-inline warning">{{this}}</label>{{/instance.computed_errors.contact}}
        {{/using}}
      </div>
    </div>
  </div>

  <div class="row-fluid">
    <div data-id="note_hidden" class="span6 hidable">
      <label>
        Notes
        <i class="grcicon-help-black" rel="tooltip" title="Append simple text or html notes here."></i>
        <a data-id="hide_note_lk" href="javascript://" class="field-hide" tabindex="-1">hide</a>
      </label>
      <div class="wysiwyg-area">
        <textarea data-id="note_txtbx" tabindex="6" id="notes" class="span12 double wysihtml5" name="notes" placeholder="Enter Notes">{{{notes}}}</textarea>
      </div>
    </div>
  </div>

  <div class="row-fluid">
    <div class="span4 hidable">
      <label>
        Code
        <i class="grcicon-help-black" rel="tooltip" title="The ZenGRC application will automatically provide codes for new objects.  If you would like to override this feature you may manually enter a code of your choosing.  You should have a specific reason for doing this."></i>
        <a href="javascript://" class="field-hide" tabindex="-1">hide</a>
      </label>
      <input tabindex="5" class="input-block-level" name="slug" placeholder="RISK-XXX" type="text" value="{{slug}}">
    </div>

    <div class="span4 hidable">
      <label>
        Effective Date
        <i class="grcicon-help-black" rel="tooltip" title="Enter the date this object becomes effective."></i>
        <a href="javascript://" class="field-hide" tabindex="-1">hide</a>
      </label>
      <input tabindex="6" class="input-block-level date" name="start_date" data-toggle="datepicker" data-before="end_date" placeholder="MM/DD/YYYY" type="text" value="{{localize_date start_date}}">
    </div>

    <div class="span4 hidable">
      <label>
        Stop Date
        <i class="grcicon-help-black" rel="tooltip" title="Enter the date the object stops being effective."></i>
        <a href="javascript://" class="field-hide" tabindex="-1">hide</a>
      </label>
      <input tabindex="7" class="input-block-level date" name="end_date" data-toggle="datepicker" data-after="start_date" placeholder="MM/DD/YYYY" type="text" value="{{localize_date end_date}}">
    </div>
  </div>

  <div class="row-fluid">
    <div class="span4 hidable">
      <label>
        State
        <i class="grcicon-help-black" rel="tooltip" title="Indicates the status of this object."></i>
        <a href="javascript://" class="field-hide" tabindex="-1">hide</a>
      </label>
      <select class="input-block-level" name="status" null-if-empty="null-if-empty" tabindex="8">
        <option value="" {{#if_equals status ""}}selected{{/if_equals}}>---</option>
        {{#iterate 'Draft', 'Final', 'Effective', 'Ineffective', 'Launched', 'Not Launched', 'In Scope', 'Not in Scope', 'Deprecated'}}
          <option {{#if_equals iterator status}}selected="true"{{/if_equals}}>{{iterator}}</option>
        {{/iterate}}
      </select>
    </div>
  </div>

</form>
{{/instance}}
</div>
{{!/div}}
