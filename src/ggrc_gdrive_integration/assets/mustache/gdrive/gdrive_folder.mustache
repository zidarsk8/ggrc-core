{{!
    Copyright (C) 2017 Google Inc.
    Licensed under http://www.apache.org/licenses/LICENSE-2.0 <see LICENSE file>
}}

<div class="row-fluid wrap-row">
  <div class="span12 small-info">
    {{#unless hideLabel}}
      <label class="multi-type-label">
        {{instance.class.title_singular}} Folder
        <label class="inline">
          <i class="fa fa-question-circle" rel="tooltip" data-original-title="If selected, all {{instance.class.title_singular}} attachments go here."></i>
        </label>
        <a data-id="hide_folder_lk" href="javascript://" class="field-hide" tabindex="-1">hide</a>
      </label>
    {{/unless}}

    <spinner toggle="_folder_change_pending"></spinner>

    {{#if current_folder}}
      <div class="oneline">
        {{#if subLabel}}
          <span>{{subLabel}}:</span>
        {{/if}}
        <a href="{{current_folder.alternateLink}}" target="_blank">
          <i class="fa fa-paperclip attach-blue"></i> {{current_folder.title}}
        </a>
        {{^if readonly}}
        <a class="icon-link entry-attachment" href="javascript://" rel="tooltip" data-original-title="{{firstnonempty placeholder 'Choose a new folder'}}" data-toggle="gdrive-picker" data-model="{{instance.class.model_singular}}" data-id="{{instance.id}}" data-type="folders" data-replace="true">
          <i class="fa fa-pencil-square-o"></i>
        </a>
        {{^if no_detach}}
        <a class="icon-link" href="javascript://" rel="tooltip" data-original-title="Detach folder from {{instance.class.title_singular}}" data-toggle="gdrive-remover"
          data-model="{{instance.class.model_singular}}" data-id="{{instance.id}}">
          <i class="fa fa-trash"></i>
        </a>
        {{/if}}
        {{/if}}
      </div>
      {{else}}
        {{#if folder_error}}
          <small>
            <strong>Warning:</strong> You need permission to access {{instance.class.title_singular}} folder. <a href="https://drive.google.com/folderview?id={{grdive_msg_to_id folder_error.message}}&usp=sharing#">Request access.</a>
          </small>
          {{^if readonly}}
          <a class="icon-link entry-attachment" href="javascript://" rel="tooltip" data-original-title="{{firstnonempty placeholder 'Choose a new folder'}}" data-toggle="gdrive-picker" data-model="{{instance.class.model_singular}}" data-id="{{instance.id}}" data-type="folders" data-replace="true">
            <i class="fa fa-pencil-square-o"></i>
          </a>
          {{^if no_detach}}
          <a class="icon-link" href="javascript://" rel="tooltip" data-original-title="Detach folder from {{instance.class.title_singular}}" data-toggle="gdrive-remover"
            data-model="{{instance.class.model_singular}}" data-id="{{instance.id}}">
            <i class="fa fa-trash"></i>
          </a>
          {{/if}}
          {{/if}}
        {{else}}
          <span class="error">
            No folder for this {{instance.class.title_singular}}.
          </span>
          {{^if readonly}}
          <a href="javascript://"
            tabindex="{{firstnonempty tabindex '0'}}"
            class="entry-attachment tree-item-add"
            data-toggle="gdrive-picker"
            data-model="{{instance.class.model_singular}}"
            data-type="folders"
            data-id="{{instance.id}}">
              <i class="fa fa-paperclip attach-blue"></i> Assign folder
          </a>
          {{/if}}
        {{/if}}
    {{/if}}
  </div>
</div>
